{"id":"dictate-1lu","title":"OSD: stop recording while Hovering never enters lingering","description":"The state machine does not handle PhaseChanged{idle} while in Hovering state. This violates the invariant that visual state should enter Lingering when domain becomes idle. Currently (Hovering, PhaseChanged{idle}) is a no-op, leaving pulse animation running and OSD visible indefinitely. Need to add transition: (Hovering, PhaseChanged{idle}) -\u003e (Lingering, [StartLingerTimer, StopPulseAnimation]).","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-14T08:47:01.42843115-06:00","updated_at":"2025-12-14T08:47:08.199973559-06:00","dependencies":[{"issue_id":"dictate-1lu","depends_on_id":"dictate-d0g","type":"discovered-from","created_at":"2025-12-14T08:47:01.429641491-06:00","created_by":"daemon"}]}
{"id":"dictate-3a4","title":"Implement CLI command handlers","description":"Create cli.rs with handlers for all commands: handle_daemon(), handle_transcribe(), handle_config(), handle_setup(), handle_status(), handle_history(). Implement proper error handling, progress reporting, and user feedback. Add configuration management commands and model downloading utilities.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:37.437312355-06:00","updated_at":"2025-12-15T11:01:37.437312355-06:00","dependencies":[{"issue_id":"dictate-3a4","depends_on_id":"dictate-g66","type":"blocks","created_at":"2025-12-15T11:01:37.439303984-06:00","created_by":"daemon"}]}
{"id":"dictate-4ld","title":"Implement CLI interface with clap","description":"Create comprehensive CLI in main.rs using clap with subcommands: Commands::Daemon, Transcribe, Config, Setup, Status, History. Add global flags: --config, --verbose. Follow voxtype CLI patterns with proper help text and examples. Handle argument parsing and command routing.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:00:58.123473063-06:00","updated_at":"2025-12-15T11:00:58.123473063-06:00","dependencies":[{"issue_id":"dictate-4ld","depends_on_id":"dictate-crq","type":"blocks","created_at":"2025-12-15T11:00:58.12570498-06:00","created_by":"daemon"}]}
{"id":"dictate-4yb","title":"Clean up dead code and consolidate theme constants","description":"Option B cleanup: Delete unused code not in spec, consolidate theme constants.\n\nDELETE (not in spec/plan):\n- timeline.rs: set_reverse(), clear(), ease_out_elastic(), WidthAnimation, WindowAnimationValues\n- timeline.rs: ids::TIMER_WIDTH, ids::CONTENT (not used)\n- state.rs: DomainState fields (spectrum, recording_start_ts, current_ts) - stored in app.rs instead\n\nCONSOLIDATE (duplicated):\n- theme.rs constants vs widgets local constants (BAR_RADIUS, DOT_RADIUS, spacing::*, TRANSCRIBING_*)\n- Either widgets import from theme.rs OR delete theme.rs duplicates\n\nKEEP BUT TRACK (spec says needed):\n- ForceHide event - for emergency hide, not yet wired up\n- Timeline.tick() - spec pattern, using get_at() instead currently\n- Timeline.get() - spec pattern, using get_at() instead currently  \n- linear() easing - may be needed for non-eased animations\n\nCurrent state: 30 compiler warnings for dead code.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-13T22:25:07.632579477-06:00","updated_at":"2025-12-13T22:25:34.378161271-06:00"}
{"id":"dictate-52u","title":"Research/decide separate process architecture","description":"Oracle says: adopt separate process ONLY if single-process backend abstraction proves insufficient. Trigger conditions: 1) Working single-process backend abstraction exists, 2) WinitBackend works on Windows/macOS/X11, 3) Repeatedly hit unfixable issues due to event-loop/toolkit constraints. Until then, stay single-process. Document decision criteria and revisit after cross-platform backends exist.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T19:37:35.835589918-06:00","updated_at":"2025-12-15T11:25:25.693715933-06:00","closed_at":"2025-12-15T11:25:25.693715933-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-52u","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T19:38:12.024848347-06:00","created_by":"daemon"},{"issue_id":"dictate-52u","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.3943237-06:00","created_by":"daemon"}]}
{"id":"dictate-60e","title":"Enhance Wayland auto-typing with ydotool","description":"Create output/typer.rs with ydotool primary support for Wayland auto-typing. Implement ydotool detection and fallback to xdotool. Add proper error handling for Wayland compatibility. Integrate with existing output modes (print, copy, insert). Test with different Wayland compositors.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:33.390491651-06:00","updated_at":"2025-12-15T11:01:33.390491651-06:00","dependencies":[{"issue_id":"dictate-60e","depends_on_id":"dictate-g66","type":"blocks","created_at":"2025-12-15T11:01:33.392795401-06:00","created_by":"daemon"}]}
{"id":"dictate-673","title":"Multi-monitor placement strategy","description":"SOMEDAY/MAYBE: Research and implement multi-monitor OSD placement. Questions: 1) Which monitor gets OSD? (primary, active, focused window's, configurable?), 2) What does iced/winit expose for monitor enumeration?, 3) How does layer-shell handle multi-monitor?, 4) DPI differences between monitors. Low priority until single-monitor works everywhere.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-13T19:37:49.826465892-06:00","updated_at":"2025-12-15T11:25:22.803400249-06:00","closed_at":"2025-12-15T11:25:22.803400249-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-673","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.435459632-06:00","created_by":"daemon"},{"issue_id":"dictate-673","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T20:23:04.648729691-06:00","created_by":"daemon"}]}
{"id":"dictate-6l6","title":"Comprehensive integration testing","description":"Test full end-to-end integration: daemon startup, hotkey detection, audio capture, transcription processing, OSD updates, and output typing. Test error scenarios, graceful shutdown, and resource cleanup. Verify performance (startup time, memory usage) meets targets. Test on different Wayland compositors (Sway, Hyprland).","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T11:02:01.430425741-06:00","updated_at":"2025-12-15T11:02:01.430425741-06:00","dependencies":[{"issue_id":"dictate-6l6","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:02:01.433602356-06:00","created_by":"daemon"}]}
{"id":"dictate-6pk","title":"macOS notch support","description":"SOMEDAY/MAYBE: Position OSD in macOS notch area on notched displays. Requires: 1) Query safeAreaInsets to detect notch, 2) Position window at notch coordinates, 3) High NSWindowLevel above menu bar, 4) unsafe AppKit interop via objc2, 5) Multi-monitor logic (notch only on built-in). Integration-heavy, easy to regress across macOS versions. Nice-to-have, not required for MVP. Depends on: macOS basic support working first.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T19:37:46.74095829-06:00","updated_at":"2025-12-15T11:25:22.804745813-06:00","closed_at":"2025-12-15T11:25:22.804745813-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-6pk","depends_on_id":"dictate-d8s","type":"blocks","created_at":"2025-12-13T19:38:12.038778006-06:00","created_by":"daemon"},{"issue_id":"dictate-6pk","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.421817954-06:00","created_by":"daemon"}]}
{"id":"dictate-6t2","title":"Separate domain vs presentation state","description":"Implement domain/presentation state split per spec. Store domain data (RecordingPhase, idle_hot, spectrum) once in DomainState. Visual states (Hidden, Appearing, Visible, etc.) reference domain data, don't duplicate it. Eliminates idle_hot duplication bug from prototype. See spec: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38 (04-state-machine.md). Foundation ready: timeline.rs and theme.rs already ported. Will rewrite app.rs to use new state machine + delete animation_compat.rs temporary shim.","notes":"CONTEXT: Foundation work complete (dictate-ali). timeline.rs and theme.rs are already ported and ready to use.\n\nSCOPE:\n1. Create new state.rs per spec (04-state-machine.md):\n   - DomainState (RecordingPhase, idle_hot, spectrum, timestamps)\n   - VisualState enum (Hidden, Appearing, Visible, Hovering, Lingering, Disappearing)\n   - transition() function returns (new_state, Vec\u003cOsdAction\u003e)\n   - No Instant in state, Timeline handles timing\n2. Rewrite app.rs to:\n   - Use new state.rs instead of current OsdState struct\n   - Use timeline.rs directly (replace all animation_compat usage)\n   - Use theme constants instead of hardcoded values\n   - Handle OsdAction side effects from transitions\n3. DELETE animation_compat.rs when complete (temporary shim, no longer needed)\n\nREFERENCE: Spec gist 04-state-machine.md has complete design. Prototype state.rs has WRONG pattern (duplicates domain data).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T19:36:33.216025923-06:00","updated_at":"2025-12-13T21:20:30.094342622-06:00","closed_at":"2025-12-13T21:20:30.094342622-06:00","dependencies":[{"issue_id":"dictate-6t2","depends_on_id":"dictate-ocn","type":"blocks","created_at":"2025-12-13T19:38:08.615379173-06:00","created_by":"daemon"},{"issue_id":"dictate-6t2","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.246728166-06:00","created_by":"daemon"},{"issue_id":"dictate-6t2","depends_on_id":"dictate-c39","type":"blocks","created_at":"2025-12-13T19:40:12.485654079-06:00","created_by":"daemon"},{"issue_id":"dictate-6t2","depends_on_id":"dictate-ali","type":"blocks","created_at":"2025-12-13T19:40:39.431237069-06:00","created_by":"daemon"}]}
{"id":"dictate-7lk","title":"Phase 3: Wayland Integration \u0026 Global Hotkeys","description":"Replace Tauri global shortcuts with evdev kernel-level hotkey detection for Wayland compatibility. Implement hotkey/evdev.rs with device discovery, key parsing, and modifier handling. Preserve Wayland Portal fallback for compatibility. Add proper permission handling for input group access.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-15T11:00:32.390724122-06:00","updated_at":"2025-12-15T11:00:32.390724122-06:00","dependencies":[{"issue_id":"dictate-7lk","depends_on_id":"dictate-una","type":"blocks","created_at":"2025-12-15T11:00:32.392908172-06:00","created_by":"daemon"}]}
{"id":"dictate-82c","title":"Add systemd service integration","description":"Create systemd service file for daemon mode operation. Add install-d, status-d, and other systemd management commands to CLI. Implement proper service configuration with User, Group, WorkingDirectory, and Restart policies. Add waybar integration via state file following voxtype patterns.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T11:01:41.444078762-06:00","updated_at":"2025-12-15T11:01:41.444078762-06:00","dependencies":[{"issue_id":"dictate-82c","depends_on_id":"dictate-g66","type":"blocks","created_at":"2025-12-15T11:01:41.448470764-06:00","created_by":"daemon"}]}
{"id":"dictate-9hm","title":"Phase 1: Foundation Cleanup \u0026 Tauri Removal","description":"Strip Tauri dependencies and framework complexity while preserving core systems. Remove Tauri plugins, SQLx database, and cross-platform abstractions. Set up pure Rust daemon foundation. Establish new project structure following Dictate conventions (top-level .rs files with /subfolders).","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-15T11:00:25.74893693-06:00","updated_at":"2025-12-15T11:00:25.74893693-06:00","dependencies":[{"issue_id":"dictate-9hm","depends_on_id":"dictate-una","type":"blocks","created_at":"2025-12-15T11:00:25.750885041-06:00","created_by":"daemon"}]}
{"id":"dictate-9zp","title":"Add Wayland Portal fallback support","description":"Create hotkey/fallback.rs preserving existing Wayland Portal global shortcut support. Extract current Tauri portal hotkey code and adapt for daemon use. Implement as fallback when evdev fails (user not in input group). Add proper error handling and fallback detection logic.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T11:01:25.028644542-06:00","updated_at":"2025-12-15T11:01:25.028644542-06:00","dependencies":[{"issue_id":"dictate-9zp","depends_on_id":"dictate-7lk","type":"blocks","created_at":"2025-12-15T11:01:25.031687386-06:00","created_by":"daemon"}]}
{"id":"dictate-adg","title":"Restructure project directories","description":"Create new project structure following Dictate conventions. Move src-tauri/src/ → src/. Create new top-level files: main.rs, daemon.rs, cli.rs. Create subdirectories: transcription/, audio/, hotkey/, output/, osd/. Preserve existing subdirectory structures (like transcription/ and osd/widgets/).","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T11:00:47.897999985-06:00","updated_at":"2025-12-15T11:00:47.897999985-06:00","dependencies":[{"issue_id":"dictate-adg","depends_on_id":"dictate-9hm","type":"blocks","created_at":"2025-12-15T11:00:47.90024338-06:00","created_by":"daemon"}]}
{"id":"dictate-ali","title":"Create fresh OSD implementation branch from main","description":"After spec document is complete, create a new branch from main (not from the prototype branch). The prototype branch 'claude/implement-relm4-prototypes-01GTSH9fzrzhp9J1CTVjqCff' should be kept as reference but NOT merged - it's a quick exploration with messy changes and known issues. Reference the spec gist for correct implementation patterns: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38","notes":"COMPLETED: Foundation work finished successfully. Created theme.rs (152 lines) and timeline.rs (515 lines with generation tag enhancements). Moved pulsing_waveform to widgets/spectrum.rs. Created animation_compat.rs as temporary shim for app.rs compatibility. Deleted obsolete animation.rs and colors.rs. All 7 timeline tests pass. Next: dictate-6t2 (domain/presentation state split).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T19:40:33.659484796-06:00","updated_at":"2025-12-13T20:46:54.182503419-06:00","closed_at":"2025-12-13T20:29:23.02352153-06:00","dependencies":[{"issue_id":"dictate-ali","depends_on_id":"dictate-c39","type":"blocks","created_at":"2025-12-13T19:40:39.403998346-06:00","created_by":"daemon"},{"issue_id":"dictate-ali","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:40:39.418573048-06:00","created_by":"daemon"}]}
{"id":"dictate-auq","title":"Make state transitions return actions","description":"Refactor to: transition(state, event) -\u003e (new_state, Vec\u003cOsdAction\u003e) where OsdAction is enum { StartAppear, StartDisappear, StartLingerTimer(Duration), CreateWindow, DestroyWindow, None }. Decouples state machine from effects, makes flow explicit and testable. See spec: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38 (04-state-machine.md). The prototype branch 'claude/implement-relm4-prototypes-01GTSH9fzrzhp9J1CTVjqCff' does NOT have this pattern - it mutates state in place. Implement fresh per spec.","notes":"CONTEXT: This task happens AFTER dictate-6t2 (domain/presentation split). The new state.rs from dictate-6t2 will have the structure but transitions will still mutate state in place initially.\n\nSCOPE: Refactor transition() to return actions instead of mutating:\n- transition(visual, domain, event) -\u003e (new_visual, Vec\u003cOsdAction\u003e)\n- OsdAction enum: StartAppearAnimation, StartDisappearAnimation, StartPulseAnimation, etc.\n- App.rs interprets actions (timeline.set, timers, etc.)\n- Makes state machine pure and testable\n\nREFERENCE: Spec gist 04-state-machine.md has the action pattern.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T19:36:36.570113631-06:00","updated_at":"2025-12-13T21:21:02.006625636-06:00","closed_at":"2025-12-13T21:21:02.006625636-06:00","dependencies":[{"issue_id":"dictate-auq","depends_on_id":"dictate-6t2","type":"blocks","created_at":"2025-12-13T19:38:08.628472126-06:00","created_by":"daemon"},{"issue_id":"dictate-auq","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.262061289-06:00","created_by":"daemon"}]}
{"id":"dictate-c1f","title":"Research/decide GNOME Wayland strategy","description":"GNOME Wayland doesn't support layer-shell protocol. Options: A) XWayland auto-relaunch (fragile, can break under Flatpak/Snap/systemd), B) Graceful degradation with winit on Wayland (imperfect but stable), C) User-facing toggle with explanation. Oracle recommends B or C. Document: what exactly breaks on GNOME Wayland with winit? What's the UX impact? Capture findings in docs/plans/. Depends on: WinitBackend existing to test.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T19:37:32.201260241-06:00","updated_at":"2025-12-15T11:25:22.797323129-06:00","closed_at":"2025-12-15T11:25:22.797323129-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-c1f","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T19:38:12.01175933-06:00","created_by":"daemon"},{"issue_id":"dictate-c1f","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.3805751-06:00","created_by":"daemon"}]}
{"id":"dictate-c39","title":"Create OSD patterns specification document","description":"Before starting fresh branch, document the valuable patterns from the prototype: 1) Timeline animation system (Chain, Keyframe, easing functions) - copy API design, 2) Theme constants (colors, timing, dimensions) - copy structure, 3) State machine pattern - document improved design per oracle (domain vs presentation, actions on transition, generation tags), 4) Cross-platform backend strategy from CROSS_PLATFORM_OSD_GUIDE.md. Output: docs/plans/osd-patterns-spec.md that serves as implementation guide for clean branch.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-13T19:40:06.981319154-06:00","updated_at":"2025-12-13T19:46:50.467623374-06:00","closed_at":"2025-12-13T19:46:50.467623374-06:00","dependencies":[{"issue_id":"dictate-c39","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:40:12.512953538-06:00","created_by":"daemon"},{"issue_id":"dictate-c39","depends_on_id":"dictate-ocn","type":"blocks","created_at":"2025-12-13T19:40:33.64444617-06:00","created_by":"daemon"}]}
{"id":"dictate-c7i","title":"Integrate OSD with daemon broadcast system","description":"Connect OSD to new daemon via broadcast channels. Update osd.rs to work with BroadcastServer without Tauri. Test OSD state updates from daemon events. Ensure spectrum visualization, timer display, and status indicators work with new broadcast messages. Verify OSD positioning and configuration loading.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:50.09967871-06:00","updated_at":"2025-12-15T11:01:50.09967871-06:00","dependencies":[{"issue_id":"dictate-c7i","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:01:50.104056821-06:00","created_by":"daemon"}]}
{"id":"dictate-ccj","title":"Implement evdev hotkey detection","description":"Create hotkey/evdev.rs with kernel-level input detection. Implement device discovery for keyboards, non-blocking polling with fcntl O_NONBLOCK, modifier key state tracking, and key repeat filtering. Parse existing shortcut format (CommandOrControl+Shift+Space) to evdev key codes. Add proper error handling for input group permissions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:16.796839537-06:00","updated_at":"2025-12-15T11:01:16.796839537-06:00","dependencies":[{"issue_id":"dictate-ccj","depends_on_id":"dictate-7lk","type":"blocks","created_at":"2025-12-15T11:01:16.799907915-06:00","created_by":"daemon"}]}
{"id":"dictate-cfi","title":"Accessibility and reduced motion support","description":"SOMEDAY/MAYBE: 1) Respect prefers-reduced-motion system setting (skip/shorten animations), 2) Keyboard navigation if OSD becomes interactive, 3) Screen reader announcements for state changes, 4) 'Disable OSD' user preference. Nice-to-have for inclusive UX.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-13T19:37:52.509361797-06:00","updated_at":"2025-12-15T11:25:22.802087998-06:00","closed_at":"2025-12-15T11:25:22.802087998-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-cfi","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.448627268-06:00","created_by":"daemon"},{"issue_id":"dictate-cfi","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T20:23:05.190631587-06:00","created_by":"daemon"}]}
{"id":"dictate-coy","title":"Remove Tauri dependencies from Cargo.toml","description":"Strip all Tauri ecosystem dependencies from src-tauri/Cargo.toml: tauri, tauri-plugin-*, sqlx, tauri-plugin-sql. Keep essential dependencies: sherpa-rs, cpal, rustfft, iced ecosystem, toml, directories, reqwest, tokio. Add new dependencies: evdev, libc, ydotool, clap.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T11:00:44.405277757-06:00","updated_at":"2025-12-15T11:00:44.405277757-06:00","dependencies":[{"issue_id":"dictate-coy","depends_on_id":"dictate-9hm","type":"blocks","created_at":"2025-12-15T11:00:44.409145907-06:00","created_by":"daemon"}]}
{"id":"dictate-crq","title":"Phase 2: Daemon Architecture \u0026 Event Loop","description":"Implement voxtype-inspired daemon with tokio::select! event loop. Create main.rs CLI entry point, daemon.rs orchestration logic, and broadcast-based communication. Preserve existing broadcast.rs architecture while integrating with new daemon system.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-15T11:00:29.039667236-06:00","updated_at":"2025-12-15T11:00:29.039667236-06:00","dependencies":[{"issue_id":"dictate-crq","depends_on_id":"dictate-una","type":"blocks","created_at":"2025-12-15T11:00:29.042228595-06:00","created_by":"daemon"}]}
{"id":"dictate-cu1","title":"Remove SQLx database system","description":"Remove all SQLx database code: db.rs, database imports, SQL queries, migration system. Remove database initialization from lib.rs. Clean up any remaining SQLx references in commands and other modules. This will be replaced with file-based history in Phase 4.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T11:00:54.854565671-06:00","updated_at":"2025-12-15T11:00:54.854565671-06:00","dependencies":[{"issue_id":"dictate-cu1","depends_on_id":"dictate-9hm","type":"blocks","created_at":"2025-12-15T11:00:54.85710592-06:00","created_by":"daemon"}]}
{"id":"dictate-d0g","title":"Add comprehensive state machine tests","description":"Add unit and property tests for OsdState: 1) Test all valid transitions, 2) Test that invalid transitions are handled safely, 3) Property test: no sequence of events can reach illegal state, 4) Test generation-tagged completion rejection. See spec: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38 (07-implementation-checklist.md). The prototype has some timeline tests to reference, but state machine tests are new.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T19:36:47.234638983-06:00","updated_at":"2025-12-14T08:53:31.996665316-06:00","closed_at":"2025-12-14T08:53:31.996665316-06:00","dependencies":[{"issue_id":"dictate-d0g","depends_on_id":"dictate-tyt","type":"blocks","created_at":"2025-12-13T19:38:08.656399933-06:00","created_by":"daemon"},{"issue_id":"dictate-d0g","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.312340519-06:00","created_by":"daemon"}]}
{"id":"dictate-d8s","title":"macOS support (basic)","description":"Enable OSD on macOS (non-notch). Depends on WinitBackend. Considerations: 1) LSUIElement=true to hide from Dock, 2) NSWindowCollectionBehavior for spaces/fullscreen, 3) Window level above menu bar, 4) Prevent activation/focus stealing. Test on macOS Sonoma+.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T19:37:22.575705406-06:00","updated_at":"2025-12-15T11:25:22.798526003-06:00","closed_at":"2025-12-15T11:25:22.798526003-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-d8s","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T19:38:10.384396881-06:00","created_by":"daemon"},{"issue_id":"dictate-d8s","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.367285545-06:00","created_by":"daemon"}]}
{"id":"dictate-dgf","title":"Documentation and migration guide","description":"Create comprehensive README.md with new architecture description, installation instructions, and usage examples. Document CLI commands and configuration options. Create migration guide for existing users (no config migration needed). Document Wayland requirements and input group setup.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T11:02:10.114332077-06:00","updated_at":"2025-12-15T11:02:10.114332077-06:00","dependencies":[{"issue_id":"dictate-dgf","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:02:10.116832102-06:00","created_by":"daemon"}]}
{"id":"dictate-e03","title":"Remove Tauri-specific code and imports","description":"Strip all Tauri-specific code from Rust files: remove tauri imports, Tauri state management, Tauri commands, Tauri window handling. Remove lib.rs Tauri builder setup. Clean up any remaining Tauri references in transcription, recording, and other modules.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T11:00:51.329923839-06:00","updated_at":"2025-12-15T11:00:51.329923839-06:00","dependencies":[{"issue_id":"dictate-e03","depends_on_id":"dictate-9hm","type":"blocks","created_at":"2025-12-15T11:00:51.331769026-06:00","created_by":"daemon"}]}
{"id":"dictate-e65","title":"Windows support","description":"Enable OSD on Windows. Depends on WinitBackend. Considerations: 1) WS_EX_TOOLWINDOW to hide from Alt+Tab, 2) WS_EX_NOACTIVATE to prevent focus stealing, 3) Always-on-top via window level, 4) DPI scaling. Test on Windows 10/11.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T19:37:20.168116296-06:00","updated_at":"2025-12-15T11:25:22.799835219-06:00","closed_at":"2025-12-15T11:25:22.799835219-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-e65","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T19:38:10.3707157-06:00","created_by":"daemon"},{"issue_id":"dictate-e65","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.354831994-06:00","created_by":"daemon"}]}
{"id":"dictate-ebs","title":"Adapt broadcast.rs for daemon integration","description":"Modify existing broadcast.rs to work without Tauri. Remove Tauri event bridging, keep tokio::broadcast system. Ensure Message enum works for daemon → OSD communication. Update BroadcastServer to work independently of Tauri state management. Test channel communication between daemon and OSD.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:04.467381556-06:00","updated_at":"2025-12-15T11:01:04.467381556-06:00","dependencies":[{"issue_id":"dictate-ebs","depends_on_id":"dictate-crq","type":"blocks","created_at":"2025-12-15T11:01:04.46906742-06:00","created_by":"daemon"}]}
{"id":"dictate-ev3","title":"Phase 5: Component Integration \u0026 Polish","description":"Integrate all preserved components (OSD, transcription, audio) with new daemon architecture. Extract OSD module from src-tauri/src/osd/ to src/osd/. Test full integration, optimize performance, and add comprehensive error handling. Ensure OSD communication works with broadcast system.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-15T11:00:39.17515846-06:00","updated_at":"2025-12-15T11:00:39.17515846-06:00","dependencies":[{"issue_id":"dictate-ev3","depends_on_id":"dictate-una","type":"blocks","created_at":"2025-12-15T11:00:39.178798955-06:00","created_by":"daemon"}]}
{"id":"dictate-g66","title":"Phase 4: System Integration \u0026 CLI Interface","description":"Add comprehensive CLI interface following voxtype patterns with subcommands (daemon, transcribe, config, setup, status, history). Implement file-based history management to replace SQLx. Add systemd service integration and Linux desktop setup utilities.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-15T11:00:35.507442082-06:00","updated_at":"2025-12-15T11:00:35.507442082-06:00","dependencies":[{"issue_id":"dictate-g66","depends_on_id":"dictate-una","type":"blocks","created_at":"2025-12-15T11:00:35.51065944-06:00","created_by":"daemon"}]}
{"id":"dictate-gr0","title":"OSD Architecture Overhaul","description":"Comprehensive overhaul of OSD architecture based on oracle review. Includes: bug fixes, state machine hardening, backend abstraction, and cross-platform expansion. Key insight: keep patterns (state machine, timeline, theme), fix layering (domain vs presentation), build backend trait, don't jump to separate process until simpler approaches fail.","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-13T19:36:04.557647484-06:00","updated_at":"2025-12-13T21:03:16.621157177-06:00"}
{"id":"dictate-k0e","title":"Preserve and adapt config.rs for daemon","description":"Keep existing config.rs structure and TOML format. Remove Tauri-specific SettingsState and RwLock dependencies. Add direct load/save methods for use in daemon. Ensure model preferences, audio settings, OSD configuration remain compatible. Test configuration file loading and error handling.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:08.062672942-06:00","updated_at":"2025-12-15T11:01:08.062672942-06:00","dependencies":[{"issue_id":"dictate-k0e","depends_on_id":"dictate-crq","type":"blocks","created_at":"2025-12-15T11:01:08.065346854-06:00","created_by":"daemon"}]}
{"id":"dictate-k64","title":"Extract OSD module to new location","description":"Move src-tauri/src/osd/ to src/osd/ preserving all functionality. Update imports and paths for OSD components. Ensure iced + iced_layershell dependencies are preserved. Test OSD compilation and visual appearance in new location. Keep all widgets, animations, and state machine intact.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:45.937925687-06:00","updated_at":"2025-12-15T11:01:45.937925687-06:00","dependencies":[{"issue_id":"dictate-k64","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:01:45.941080015-06:00","created_by":"daemon"}]}
{"id":"dictate-ln8","title":"Create OsdBackend trait for window management abstraction","description":"Abstract window management behind a trait: trait OsdBackend { fn ensure_window(\u0026mut self); fn set_visible(\u0026mut self, visible: bool); fn set_geometry(...); fn destroy_window(\u0026mut self); }. Start with LayerShellBackend implementing this. See spec: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38 (05-backend-trait.md). The prototype branch 'claude/implement-relm4-prototypes-01GTSH9fzrzhp9J1CTVjqCff' can be referenced for iced_layershell usage patterns in app.rs, but the backend abstraction is new.","notes":"CONTEXT: Foundation work complete (dictate-ali). timeline.rs and theme.rs ready. Backend trait will be implemented AFTER state machine rewrite (dictate-6t2) completes.\n\nSCOPE:\n1. Create backend.rs with OsdBackend trait per spec (05-backend-trait.md)\n2. Implement LayerShellBackend (current iced_layershell code)\n3. Update app.rs to use backend trait (decouple from iced_layershell directly)\n\nREFERENCE: Spec gist 05-backend-trait.md. Prototype app.rs has iced_layershell usage patterns to extract.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T19:36:43.729962359-06:00","updated_at":"2025-12-13T22:14:04.27772726-06:00","closed_at":"2025-12-13T22:14:04.27772726-06:00","dependencies":[{"issue_id":"dictate-ln8","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.296916795-06:00","created_by":"daemon"},{"issue_id":"dictate-ln8","depends_on_id":"dictate-c39","type":"blocks","created_at":"2025-12-13T19:40:12.49984815-06:00","created_by":"daemon"},{"issue_id":"dictate-ln8","depends_on_id":"dictate-ali","type":"blocks","created_at":"2025-12-13T19:40:39.443820298-06:00","created_by":"daemon"}]}
{"id":"dictate-mkd","title":"Create hotkey coordination module","description":"Create hotkey.rs as main coordination for hotkey systems. Implement HotkeyManager with evdev primary detection and Wayland Portal fallback. Add hotkey parsing from existing shortcut strings to evdev key codes. Create hotkey event enum (Pressed/Released) and channel communication to daemon. Handle permission errors gracefully.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:21.024165835-06:00","updated_at":"2025-12-15T11:01:21.024165835-06:00","dependencies":[{"issue_id":"dictate-mkd","depends_on_id":"dictate-7lk","type":"blocks","created_at":"2025-12-15T11:01:21.026538771-06:00","created_by":"daemon"}]}
{"id":"dictate-ocn","title":"Document idle_hot bug pattern to avoid","description":"In the prototype, StateChanged events passed idle_hot but match arms used the OLD value. This is a class of bug caused by duplicating domain data in every visual state variant. Document this as anti-pattern in the spec. The fix is structural: store domain data once and reference it. Don't duplicate RecordingSnapshot/idle_hot in every OsdVisualState variant.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T19:36:19.962753076-06:00","updated_at":"2025-12-13T19:46:50.453297277-06:00","closed_at":"2025-12-13T19:46:50.453297277-06:00","dependencies":[{"issue_id":"dictate-ocn","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.201987545-06:00","created_by":"daemon"}]}
{"id":"dictate-ocx","title":"Update build configuration and deployment","description":"Update Cargo.toml release profile for optimization (lto, codegen-units, strip). Add feature flags for GPU acceleration (gpu-vulkan, gpu-cuda, gpu-metal). Update build.rs if needed. Create systemd service file and desktop entry. Test build performance and binary size.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:02:06.629141708-06:00","updated_at":"2025-12-15T11:02:06.629141708-06:00","dependencies":[{"issue_id":"dictate-ocx","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:02:06.63151737-06:00","created_by":"daemon"}]}
{"id":"dictate-pg6","title":"Implement file-based history management","description":"Create output/history.rs to replace SQLx database. Implement HistoryManager with save_transcription() to timestamped text files, list_transcriptions() with chronological sorting, and search_transcriptions() with text matching. Use ~/.local/share/dictate/history/ directory. Create simple JSON index for fast search capabilities.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:29.091521678-06:00","updated_at":"2025-12-15T11:01:29.091521678-06:00","dependencies":[{"issue_id":"dictate-pg6","depends_on_id":"dictate-g66","type":"blocks","created_at":"2025-12-15T11:01:29.094395178-06:00","created_by":"daemon"}]}
{"id":"dictate-pgj","title":"Extract and adapt audio capture system","description":"Move src-tauri/src/recording.rs to src/audio/ preserving CPAL capture and FFT spectrum analysis. Create audio.rs coordination module. Remove Tauri shortcut handling, integrate with hotkey system. Ensure spectrum data flows to OSD via broadcast channels. Test device management and audio quality.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:57.913681448-06:00","updated_at":"2025-12-15T11:01:57.913681448-06:00","dependencies":[{"issue_id":"dictate-pgj","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:01:57.917435889-06:00","created_by":"daemon"}]}
{"id":"dictate-qw4","title":"Fix or remove unused transcription_result field","description":"In prototype app.rs, transcription_result is set (lines 209, 218) but never read in render logic. May or may not apply depending on what code is ported from prototype branch 'claude/implement-relm4-prototypes-01GTSH9fzrzhp9J1CTVjqCff' to fresh implementation. Review when implementing fresh branch - either use it to display transcription results or remove it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T19:36:25.901204653-06:00","updated_at":"2025-12-13T20:47:02.417375974-06:00","closed_at":"2025-12-13T20:47:02.417375974-06:00","dependencies":[{"issue_id":"dictate-qw4","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.231209022-06:00","created_by":"daemon"},{"issue_id":"dictate-qw4","depends_on_id":"dictate-ali","type":"blocks","created_at":"2025-12-13T20:17:08.186093637-06:00","created_by":"daemon"}]}
{"id":"dictate-r4n","title":"Extract and adapt transcription engines","description":"Move src-tauri/src/transcription/ to src/transcription/ preserving sherpa-rs integrations. Remove Tauri-specific progress reporting, replace with broadcast messages. Keep model catalog, download system, and engine switching. Test Whisper, Moonshine, and Parakeet TDT engine loading and functionality.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:54.467186187-06:00","updated_at":"2025-12-15T11:01:54.467186187-06:00","dependencies":[{"issue_id":"dictate-r4n","depends_on_id":"dictate-ev3","type":"blocks","created_at":"2025-12-15T11:01:54.470601715-06:00","created_by":"daemon"}]}
{"id":"dictate-rgk","title":"Implement daemon.rs with tokio::select! event loop","description":"Create daemon.rs with voxtype-inspired event loop. Implement DaemonState enum (Idle, Recording, Transcribing, Error). Use tokio::select! for hotkey events, timeout checks, and shutdown signals. Orchestrate interaction between hotkey, audio, transcription, and output components. Handle graceful shutdown.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T11:01:01.343305401-06:00","updated_at":"2025-12-15T11:01:01.343305401-06:00","dependencies":[{"issue_id":"dictate-rgk","depends_on_id":"dictate-crq","type":"blocks","created_at":"2025-12-15T11:01:01.347380314-06:00","created_by":"daemon"}]}
{"id":"dictate-rjq","title":"Linux X11 support","description":"Enable OSD on Linux X11 sessions. Depends on WinitBackend. May need X11-specific hints via x11rb: _NET_WM_STATE_ABOVE, _NET_WM_STATE_STICKY, _NET_WM_STATE_SKIP_TASKBAR, _NET_WM_WINDOW_TYPE_NOTIFICATION. Test on: bare X11, XWayland on various compositors.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-13T19:37:17.818249536-06:00","updated_at":"2025-12-15T11:25:22.800957831-06:00","closed_at":"2025-12-15T11:25:22.800957831-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-rjq","depends_on_id":"dictate-y70","type":"blocks","created_at":"2025-12-13T19:38:10.356381659-06:00","created_by":"daemon"},{"issue_id":"dictate-rjq","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.341210053-06:00","created_by":"daemon"}]}
{"id":"dictate-tyt","title":"Generation-tag internal events to prevent stale completions","description":"Add generation counter to animations and include it in completion events. Timeline should be authoritative source of completion. Ignore completion events with wrong generation. See spec: https://gist.github.com/joshuadavidthomas/c4a94f6a4e62111b9a26636f52fdbf38 (02-timeline-animation.md, 04-state-machine.md). The prototype branch timeline.rs is missing generation tags - extend it per spec.","notes":"CONTEXT: Generation tags ALREADY IMPLEMENTED in timeline.rs during foundation work (dictate-ali).\n\nCOMPLETED:\n- Added generation counter to Timeline\n- generation() method returns current animation generation\n- is_generation_complete() checks if specific generation done\n- Tests pass (test_generation_increments, test_old_generation_is_complete, etc.)\n\nREMAINING WORK: Update state machine (dictate-6t2) and app.rs to USE generation tags when checking animation completion events. Pattern: store generation when starting animation, check generation when handling completion.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T19:36:39.795626834-06:00","updated_at":"2025-12-13T21:28:14.92831812-06:00","closed_at":"2025-12-13T21:28:14.92831812-06:00","dependencies":[{"issue_id":"dictate-tyt","depends_on_id":"dictate-auq","type":"blocks","created_at":"2025-12-13T19:38:08.642513395-06:00","created_by":"daemon"},{"issue_id":"dictate-tyt","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.280660042-06:00","created_by":"daemon"}]}
{"id":"dictate-una","title":"Transformation Epic: Voxtype-inspired Dictate Refactoring","description":"Updated transformation epic to include comprehensive GPU acceleration research and implementation plan for Linux-only deployment. Research revealed sherpa-rs currently only supports CUDA, not the broader GPU providers (Vulkan, ROCm, etc.) available in voxtype's whisper-rs. Plan focuses on CUDA implementation first with extensible architecture for future GPU providers as sherpa-rs evolves.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-15T11:00:16.774026813-06:00","updated_at":"2025-12-15T11:52:28.662899991-06:00"}
{"id":"dictate-xbq","title":"Document current GNOME/platform knowledge","description":"Before punting GNOME decision, document what we know now: 1) Layer-shell doesn't work on GNOME, 2) XWayland relaunch approach and its risks (Flatpak, systemd, etc.), 3) What the cross-platform guide proposes, 4) Oracle's concerns. Put in docs/plans/ so knowledge isn't lost. This is a capture task, not a decision task.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T19:37:39.230931478-06:00","updated_at":"2025-12-13T19:46:50.480478663-06:00","closed_at":"2025-12-13T19:46:50.480478663-06:00","dependencies":[{"issue_id":"dictate-xbq","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.40809897-06:00","created_by":"daemon"}]}
{"id":"dictate-xv2","title":"Clean up dead code in animation.rs","description":"In prototype animation.rs, only pulsing_waveform is still used. The rest (PulseTween, WindowTween, WidthTween, compute_window_animation, etc.) is dead code since timeline.rs was introduced. May or may not apply depending on what code is ported from prototype branch 'claude/implement-relm4-prototypes-01GTSH9fzrzhp9J1CTVjqCff' to fresh implementation. Review when implementing fresh branch - either move pulsing_waveform elsewhere or delete the dead code.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T19:36:23.086867553-06:00","updated_at":"2025-12-13T20:47:01.065288566-06:00","closed_at":"2025-12-13T20:47:01.065288566-06:00","dependencies":[{"issue_id":"dictate-xv2","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.216087367-06:00","created_by":"daemon"},{"issue_id":"dictate-xv2","depends_on_id":"dictate-ali","type":"blocks","created_at":"2025-12-13T20:17:08.561140442-06:00","created_by":"daemon"}]}
{"id":"dictate-y70","title":"Implement WinitBackend for cross-platform support","description":"Implement OsdBackend trait for iced+winit (non-layer-shell). This enables: Linux X11, Windows, macOS. Key considerations: 1) Always-on-top window level, 2) Decorations off, 3) Transparent background, 4) Click-through/input passthrough, 5) Positioning (screen geometry queries). This is the foundation for all non-Wayland-layer-shell platforms.","notes":"Reopening: winit backend work is incomplete/broken; deferring cross-platform support to dictate-gtx epic.","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-13T19:37:14.511094011-06:00","updated_at":"2025-12-15T11:25:22.794537953-06:00","closed_at":"2025-12-15T11:25:22.794537953-06:00","labels":["deferred"],"dependencies":[{"issue_id":"dictate-y70","depends_on_id":"dictate-ln8","type":"blocks","created_at":"2025-12-13T19:38:10.341321301-06:00","created_by":"daemon"},{"issue_id":"dictate-y70","depends_on_id":"dictate-gr0","type":"discovered-from","created_at":"2025-12-13T19:38:17.327596327-06:00","created_by":"daemon"}]}
