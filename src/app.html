<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tauri + SvelteKit + Typescript App</title>
    <!-- Critical CSS: prevents flash before stylesheets load -->
    <style>
      html { background: #0B0B0C; }
      html:not(.dark) { background: #FFFFFF; }
    </style>
    <!-- Theme bootstrap: runs before first paint -->
    <script>
      (function () {
        var THEME_KEY = 'theme';
        var DARK_BG = '#0B0B0C';
        var LIGHT_BG = '#FFFFFF';

        function getSystemTheme() {
          return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        function getEffectiveTheme() {
          try {
            var stored = localStorage.getItem(THEME_KEY);
            if (stored === 'light' || stored === 'dark') return stored;
          } catch (e) {}
          return getSystemTheme();
        }

        var theme = getEffectiveTheme();
        var isDark = theme === 'dark';
        var root = document.documentElement;

        root.classList.toggle('dark', isDark);
        root.style.colorScheme = isDark ? 'dark' : 'light';
        root.style.backgroundColor = isDark ? DARK_BG : LIGHT_BG;
      })();
    </script>
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
